<!DOCTYPE html>
<html>
<head>
  <title> G1 Pilot Study | Open Power Quality</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/3.1.0/cerulean/bootstrap.min.css">

  <!--  Load site-specific customizations after bootstrap. -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/gh-fork-ribbon.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:normal,italic,bold">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.2.0/respond.js"></script>
  <![endif]-->

  <!-- Load Bootstrap JavaScript components -->
  <script src="http://code.jquery.com/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>

</head>
<body>
<!-- Responsive navbar -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <!--  Display three horizontal lines when navbar collapsed. -->
        <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand">Open Power Quality</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="/index.html">Home</a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Technology<b class="caret"></b></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/technology/roadmap.html">Roadmap</a></li>
            <li><a href="/technology/quickstart.html">Quick Start</a></li>
            <li><a href="/technology/userguide.html">User Guide</a></li>
            <li><a href="/technology/developerguide.html">Developer Guide</a></li>
            <li><a href="/technology/g1-pilot-study.html">G1 Pilot Study</a></li>
            <li><a href="http://emilia.ics.hawaii.edu:8194/">OPQHub (development)</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Organization<b class="caret"></b></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/organization/motivation.html">Why OPQ?</a></li>
            <li><a href="/organization/team.html">Design Team</a></li>
            <li><a href="/organization/community.html">User Communities</a></li>
            <li><a href="/organization/contact.html">Contact us</a></li>
          </ul>
        </li>
        <li><a href="https://groups.google.com/forum/?fromgroups#!forum/openpowerquality">Discussion</a></li>
        <li><a href="/organization/news.html">News</a></li>
      </ul>
    </div>
  </div>
</div>

<div class="github-fork-ribbon-wrapper right">
  <div class="github-fork-ribbon">
    <a href="https://github.com/openpowerquality">Find OPQ on GitHub</a>
  </div>
</div>

<!-- Load tocify css and js -->
<link type="text/css" rel="stylesheet" href="/css/jquery.tocify.css" />

<!-- Load tocify Javascript components -->
<script src="/js/jquery-ui-1.10.4.custom.js"></script>
<script src="/js/jquery.tocify.js"></script>

<div class="container">
<div class="row">
  <div class="hidden-xs col-sm-3" >
    <!-- Our table of contents will be here !-->
    <div id="nav"></div>
  </div>
  <div class="col-xs-12 col-sm-9">
     <h1>Overview</h1>

<p>The Pipeline (G1) pilot study began in early August, 2014 with the installation of three G1 OPQBoxes on Oahu. The three OPQBoxes were installed in three locations: a scientific laboratory building on the UH Manoa campus, an apartment complex in Honolulu, and a residence on the Windward side of Oahu.</p>

<p>Also at that time, an initial version of the OPQHub cloud service was deployed and began accepting data from the devices.</p>

<p>Both OPQBoxes and the OPQHub received updates during the pilot study.  OPQBox updates improved duration recording and event throttling.  The OPQHub cloud service underwent significant redesign of its user interface. These pilot study results will refer to the latest versions of hardware and software.  In addition, one OPQBox was relocated from its Windward Oahu location to a Honolulu location during the pilot study.</p>

<p>The goals of the Pipeline Pilot Study were:</p>

<ol>
<li>To validate communication between OPQBoxes and an OPQHub.</li>
<li>To obtain preliminary, uncalibrated data about grid stability on Oahu.</li>
<li>To obtain requirements for the design of the G2 OPQBox and OPQHub.</li>
</ol>

<h1>Data summary</h1>

<p>After approximately two months of data collection, the devices generated over 8000 voltage events (i.e. voltages outside the range of 114 - 126 V, exceeding the 5% variability for normal operation established by HECO).  The devices also generated 16 frequency events (i.e. frequency fluctuation outside the range of 59.5 - 60.5 Hz).</p>

<p>All of the frequency events were less than 1 second in duration.  Only the Windward Oahu OPQBox observed frequency events. </p>

<p>Voltage events ranged from 90 V to 140 V. Most of the voltage events were on also the order of 1 second in duration, though 21 events were longer than 60 seconds. The longest recorded voltage event was 255 seconds.  </p>

<p>In addition to recording events (where voltage or frequency exceeding threshold values), the OPQBox also implements a &quot;heartbeat&quot; communication to the OPQHub to establish its liveness every 15 seconds.  As part of the heartbeat communication, the OPQBox sends the current voltage and frequency.  This provides a way to show frequency and voltage at the granularity of 15 seconds.</p>

<p>We also implemented a simple analytic to classify events according to the <a href="https://www.sceg.com/docs/librariesprovider5/pdfs/powerqualitystandards.pdf">ITIC/CBEMA power tolerance curve</a>. During the pilot study period, our devices detected two abnormal power quality events according to this metric. These were both detected on the Windward side of Oahu and involved a voltage sag to 90V of 7 seconds and 16 seconds. </p>

<h1>General results</h1>

<p>First, we feel that all of the goals for this pilot study were met in general.   The OPQBoxes were able to successfully communicate with the OPQHub.  Each of the three OPQBoxes collected several thousand voltage events. Both OPQBoxes and the OPQHub appeared relatively stable.  Our results also appear to demonstrate the possibility of grid stability issues on Oahu, although we are not yet confident enough in our design to make firm conclusions.</p>

<p>Second, the pilot study has raised questions in our minds regarding the use of ITIC as an analytic for determining the severity of power quality events. For example, ITIC only deals with voltage and does not take into account frequency or THD.  Second, it does not take into account the possibility of &quot;additive&quot; impact: the possibility that several thousand &quot;small&quot; events could add up to a significant impact on modern electrical components.</p>

<p>Third, we are not yet absolutely confident of the data processing capabilities of our first generation hardware.  We need to determine ways to better validate the accuracy and reliability of OPQBoxes in future generations.</p>

<h1>Analysis results</h1>

<p>So far we have discovered the following from analysis of the G1 Pilot Study data. </p>

<h2>Impact of PV</h2>

<p>Our first result comes from an OPQBox installed in a Kailua residence that also had photovoltaic panels.  We compared PV power generation to voltage for eight days in August and observed a distinct correlation as shown below:</p>

<p><img src="../images/results-solar-vs-voltage.png" class="center-block img-responsive"></p>

<p>In addition to the overall correlation, more fine-grained correlation is also visible. On the last day shown on the 
graph, a precipitous drop in PV output around 1pm is also correlated with a drop in voltage. </p>

<p>This correlation provides evidence for a local impact of PV on voltage.  The next question is whether or not PV impacts the grid as a whole.  To explore this, the following graph compares PV power generation in the Kailua residence to the voltage values collected by an OPQBox installed in an apartment in Honolulu, over 10 miles away.  This chart continues to show a correlation:</p>

<p><img src="../images/results-solar-vs-voltage-2.png" class="center-block img-responsive"></p>

<p>Assuming the weather was uniform across the island during this day (and so the Kailua PV values are representative of grid-wide PV production), this chart appears to demonstrate the impact of grid-wide PV on the grid itself.</p>

<p>To further test this correlation effect, the following chart shows PV generation and voltage during Hurricane Ana:</p>

<p><img src="../images/results-hurricane-ana.png" class="center-block img-responsive"></p>

<p>In this case, with almost no PV generation, the cyclical fluctuations in voltage disappears. </p>

<h2>Grid event detection</h2>

<p>A primary goal of the OPQ project is to be able to differentiate between local power quality events and grid-wide power quality events. Analysis of pilot study data confirmed that we are able to detect grid-wide events.  Here is a chart showing a voltage sag detected by two OPQBoxes approximately 10 miles away from each other. The voltage sag lasted 6 cycles and was separated by 700 ms. The timestamp between the two devices differed by 18ms, which is reasonable considering our use of NTP synchronization.</p>

<p><img src="../images/results-grid-event.png" class="center-block img-responsive"></p>

<h1>OPQBox</h1>

<p>Schematics and other documentation for the G1 OPQBox can be found in the <a href="https://github.com/openpowerquality/opqbox1">OPQBox1 repository</a>. </p>

<h2>OPQBox Goals</h2>

<p>We designed the G1 OPQBox with the following goals:</p>

<ol>
<li>Unit price below \$60 to support large-scale deployment</li>
<li>Easy to install and safe to operate</li>
<li>16/24 bit resolution and 50+ samples per grid cycle</li>
<li>Support for frequency and voltage measurement</li>
<li>Onboard processing and local storage</li>
<li>Inter-device synchronization via NTP</li>
<li>Ease of extensibility</li>
<li>Open source license and development process </li>
</ol>

<p>Here is the G1 OPQBox block diagram:</p>

<p><img src="../images/hardware-block-diagram.png" class="center-block img-responsive"></p>

<p>For safety, the G1 OPQBox is galvanically isolated from the power grid via a UL-listed wall plug transformer. This transformer is used both for powering the meter and monitoring the power grid. The output of the transformer&#39;s secondary windings is passed through a low-pass filter which is responsible for scaling down the voltage to the analog-to-digital converter(ADC) range, as well as filtering out frequencies above 1Mhz. In addition, this filter protects the sensitive inputs of the ADC.</p>

<p>The output of the filter is digitized using an ADC on an MSP430AFE microcontroller. This microcontroller is specifically designed for power metering. The G1 OPQBox combines an analog front-end, a 24bit SAR ADC capable of sampling at 4kHz, and a 16bit MCU into a single integrated circuit to reduce the bill of materials. Here is a picture of the G1 circuit board:</p>

<p><img src="../images/board3.png" class="center-block img-responsive"></p>

<p>To enable the sensor network to scale, a significant amount of processing must be performed on the device itself. This includes power quality event detection, as well as buffering of historic data leading up to the event. Furthermore, event data needs to be uploaded to the cloud for further analysis. </p>

<p>Currently, we use a Raspberry Pi single board computer for the main processing unit. The MSP430AFE sends digitized samples to the Raspberry Pi via the SPI protocol. Data is compared to the expected waveform, and if the deviation is significant, an event containing the raw data is send to the cloud via a USB 802.11 adapter. </p>

<h2>OPQBox Findings</h2>

<p>While the G1 OPQBox generally satisfied the design goals, the G1 Pilot Study revealed a number of issues:</p>

<p><strong>Impact of NTP-based synchronization on analysis.</strong> The G1 design relies on NTP (Network Time Protocol) to synchronize the clocks of the OPQBoxes.  Most utility-grade power quality devices (such as PMUs) use GPS in order to get nanosecond-level synchronization. We chose NTP because this reduces the cost of device hardware significantly as well as simplifies installation and use. We need to perform more research to determine the level of synchronization we are obtained between OPQBoxes, and what impact the use of NTP has on the kinds of analyses we can support.</p>

<p><strong>Event recording upon power cutout.</strong> Our current hardware has no battery backup, which means in the event of a complete loss of power, the device will not have time to shut down and record the wave form prior to cut-off.   We will rectify this design shortcoming in the G2 design.</p>

<p><strong>Separate transformers for power and data.</strong> In the G1 design, a single transformer was used to both power the device and to collect data. We believe this can be a source of significant noise in the data stream.  </p>

<h1>OPQHub</h1>

<p>Software and installation information can be found at the <a href="https://github.com/openpowerquality/opqhub">OPQHub Repository</a>.</p>

<h2>OPQHub Goals</h2>

<p>We designed the G1 OPQHub with the following goals:</p>

<ol>
<li>Receive and store events from OPQBoxes.</li>
<li>Support basic configuration by users.</li>
<li>Provide a useful public interface for viewing events. </li>
<li>Provide map-based location &quot;coarsening&quot; for privacy </li>
<li>Provide very basic alert-based analytics to inform users when events occur. </li>
<li>Implement the ITIC algorithm for determining event impact.</li>
</ol>

<p>The G1 OPQHub is a two-tier web application using the <a href="https://www.playframework.com/">Play Framework</a> and <a href="http://www.mysql.com/">MySQL</a>.  It is deployed on a virtual server (2 Intel Xeon X5690 CPUs at 3.47GHz, 32 GB RAM, 100 GB solid state disk) at the University of Hawaii. </p>

<p>Here is a screen image of the OPQHub home page as of the end of the G1 Pilot Study period:</p>

<p><img src="../images/opqhub-home.png" class="center-block img-responsive"></p>

<p>This page illustrates the many of the basic features of the G1 service: display of event data, map-based viewing of events, and ITIC characterization. The &quot;Display&quot; pane allows the user to filter the displayed events by a variety of criteria.  In addition, the default values and other displays in the home page provide useful summary statistics about the range of values contained in the database. For example,</p>

<ul>
<li>Frequency varies from approximately 59 Hz to 61 Hz (rounded to integer values).</li>
<li>Voltage varies from 90 to 140 V.</li>
<li>The maximum duration of an event was 255 seconds.</li>
<li>Data has been collected since August 1. </li>
<li>The database contains 11,952 events, of which 16 were Frequency and the rest Voltage.</li>
</ul>

<p>The home page allows the user to filter in order to isolate events of interest.  By deselecting the &quot;OK&quot; button and updating the display, the display shows two events falling outside the normal range according to the ITIC standard:</p>

<p><img src="../images/opqhub-yellow.png" class="center-block img-responsive"> </p>

<p>Adjusting the duration reveals the events with long duration:</p>

<p><img src="../images/opqhub-long-voltage.png" class="center-block img-responsive"> </p>

<p>Finally, zooming the map provides more details on the location of various events:</p>

<p><img src="../images/opqhub-map-zoom.png" class="center-block img-responsive"> </p>

<h2>OPQHub Findings</h2>

<p>While the G1 OPQHub also satisfied the design goals at a high level, the G1 Pilot Study revealed a number of issues:</p>

<p><strong>Usability.</strong> The G1 Pilot Study revealed that the design of a highly usable public interface is a non-trivial undertaking.  The home page UI was completely redesigned at the start of the pilot study, and it continues to undergo significant evolution.  At the conclusion of the G1 Pilot Study, the design is not yet stable enough to support a usability study using naive users. </p>

<p><strong>Performance.</strong> The performance of the system was found to be satisfactory, however we do not expect the current architecture to scale beyond at most a few thousand OPQBoxes. </p>

<h1>Communication Protocol</h1>

<p>Our first generation system also includes the design and implementation of the <a href="https://github.com/openpowerquality/opq/wiki/OPQ-Communication-Protocol">OPQ Communication Protocol</a> for data transmission to reduce the bandwidth required. </p>

<p>The device and cloud service communicate using server-side events (SSE) over HTTP, which enables the device to be sent commands from the cloud even though it might be located behind the firewall of a home wireless router.</p>

<p>Our findings from the G1 Pilot study were:</p>

<p><strong>Need for bi-directional control.</strong> We believe that the protocol should be expanded to allow OPQHub to request additional information  from devices (or to alter threshold settings).  This will require additions to the communication protocol.</p>

  </div>
</div>
</div>

<script>
  $("#nav").tocify({theme: "bootstrap3", scrollTo: "40"});
</script>

<div class="dark-blue-background">
  <footer>
    <div class="container page-footer">
      <p>OPQ is sponsored by:<br>
         Department of Information and Computer Sciences<br>
         Department of Electrical Engineering<br>
         University of Hawaii, Honolulu, HI USA</p>
      <p>Last update on: <span>18 Feb 2015</span></p>
    </div>
  </footer>
</div>
</body>
</html>
